

<!--
Componente: Register
Descripción: 
    Muestra un formulario de registro donde el usuario debe ingresar
    nombre de usuario, contraseña, email y teléfono. Al enviar el formulario,
    se ejecuta la función onRegister().
Notas:
    - Utiliza Angular Forms (ngForm) para validación del formulario.
    - Enlace para volver al login si ya tiene cuenta.
-->

<div class="register-container">

    <!-- Tarjeta de registro -->
    <div class="register-card">
        <!-- Título del formulario -->
        <h2 class="register-title">Registrarse</h2>

        <!-- Formulario de registro -->
        <form (ngSubmit)="onRegister()" #registerForm="ngForm">

            <!-- Campo de entrada: Usuario -->
            <div class="form-group">
                <label for="username">Usuario</label>
                <input
                    type="text"
                    id="username"
                    name="username"
                    class="form-input"
                    required
                    minlength="3"
                    [(ngModel)]="newUser.username"
                    #usernameField="ngModel">
                <!-- Validaciones locales + errores personalizados -->
                <div *ngIf="(usernameField.invalid && usernameField.touched) || formErrors['username']" class="error-message">
                    <div *ngIf="usernameField.errors?.['required']">El nombre de usuario es obligatorio.</div>
                    <div *ngIf="formErrors['username']">{{ formErrors['username'] }}</div>
                </div>
            </div>

            <!-- Campo de entrada: Contraseña -->
            <div class="form-group">
                <label for="password">Contraseña</label>
                <input
                    type="password"
                    id="password"
                    name="password"
                    class="form-input"
                    required
                    minlength="6"
                    [(ngModel)]="newUser.password"
                    #passwordField="ngModel">
                <!-- Mensaje de error -->
                <div *ngIf="(passwordField.invalid && passwordField.touched) || formErrors['password']" class="error-message">
                    <div *ngIf="passwordField.errors?.['required']">La contraseña es obligatoria.</div>
                    <div *ngIf="passwordField.errors?.['minlength']">La contraseña debe tener al menos 6 caracteres.</div>
                    <div *ngIf="formErrors['password']">{{ formErrors['password'] }}</div>
                </div>
            </div>

            <!-- Campo de entrada: Email -->
            <div class="form-group">
                <label for="email">Gmail</label>
                <input
                    type="email"
                    id="email"
                    name="email"
                    class="form-input"
                    required
                    pattern=".*@.*"
                    [(ngModel)]="newUser.email"
                    #emailField="ngModel">
                <!-- Mensaje de error -->
                <div *ngIf="(emailField.invalid && emailField.touched) || formErrors['email']" class="error-message">
                    <div *ngIf="emailField.errors?.['required']">El correo electrónico es obligatorio.</div>
                    <div *ngIf="formErrors['email']">{{ formErrors['email'] }}</div>
                </div>
            </div>

            <!-- Campo de entrada: Teléfono -->
            <div class="form-group">
                <label for="phone">Teléfono</label>
                <input
                    type="tel"
                    id="phone"
                    name="phone"
                    class="form-input"
                    required
                    pattern="^[0-9]{8}$"
                    [(ngModel)]="newUser.phone"
                    #phoneField="ngModel">
                <!-- Mensaje de error -->
                <div *ngIf="(phoneField.invalid && phoneField.touched) || formErrors['phone']" class="error-message">
                    <div *ngIf="phoneField.errors?.['required']">El teléfono es obligatorio.</div>
                    <div *ngIf="formErrors['phone']">{{ formErrors['phone'] }}</div>
                </div>
            </div>

            <!-- Botón de envío -->
            <div class="form-group">
                <button
                    type="submit"
                    class="register-button"
                    [disabled]="!registerForm.form.valid">
                    Registrarse
                </button>
            </div>
        </form>

        <!-- Enlace para volver al login -->
        <div class="login-link">
            <p>¿Ya tienes una cuenta?
                <a routerLink="/login">Iniciar Sesión</a>
            </p>
        </div>
    </div>
</div>